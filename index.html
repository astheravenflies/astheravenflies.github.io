<html>
	
<head>
	
<title>As The Raven Flies</title>
<meta charset='utf-8' />
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<meta property="og:image" content="http://astheravenfli.es/img/thumb/GOPR2644-1920-web.jpg" />
	
<script src='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css' rel='stylesheet' />
	
<!-- LEAFLET FOR KML -->
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/leaflet.markercluster.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v1.0.0/MarkerCluster.css' rel='stylesheet' />
<link href='./assets/map/MarkerCluster.Default.css' rel='stylesheet' />
	

<style>
	body { margin:0; padding:0; }
	.map { 
		position: absolute;
		top: 0;
		bottom: 0;
		width: 100%;
		-webkit-animation: fadein 1.5s;
		-moz-animation: fadein 1.5s;
		-ms-animation: fadein 1.5s;
		-o-animation: fadein 1.5s;
		animation: fadein 1.5s;
	}
</style>

    <link rel="stylesheet" href="assets/css/about.css" />
    <link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

<!-- GOOGLE ANALYTICS -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-97711783-2', 'auto');
ga('send', 'pageview');
</script>

</head>

<body>
	
<!-- TOP
	
<div id="top-relative">Currently crowdfunding for this cross-Canada cycle expedition. <a href="https://www.kickstarter.com/projects/asadch/as-the-raven-flies-cross-canada-cycle-tour?ref=2i2uyj" target="blank">Chip in whatever you can.</a></div> -->

<!-- NAVIGATION -->
	
<div id="map-header"><div class="map-nav">
<ul>
	<li><a href="../">Map</a></li>
	<li><a href="../journal">Journal</a></li>
	<li><a href="../about/">About</a></li>
</ul>
</div></div>

<div id="map-logo">
	<a href="./"><img src="../img/nav/atrf-logo-white-220-web.png"></a>
	</div>
	
<div id="footer">
	<div id="mc_embed_signup"><div class="map-layer">
	<form action="//chairsandtables.us8.list-manage.com/subscribe/post?u=87f9433afeb437ef7994a4495&amp;id=7d01c7600c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		<div id="mc_embed_signup_scroll">
			<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email address" required>
			<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_87f9433afeb437ef7994a4495_7d01c7600c" tabindex="-1" value=""></div>
			<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
		</div>
	</form>
	</div></div>
</div>
	
<!-- MAP -->
	
<div id='map-leaflet' class='map'></div>
	
<script>
	
L.mapbox.accessToken = 'pk.eyJ1Ijoiam9uYXRob25yZWVkIiwiYSI6ImNpc2c3Zjc4ZTAxcGIyeXZvbnV3eWNmMzIifQ.DUHfFfoG0m24UGVe-q7w6A';
var mapLeaflet = L.mapbox.map('map-leaflet', 'mapbox.light')
.setView([51, -75], 4.5);


var route = omnivore.kml('./assets/map/atrf-route.xml', null, L.geoJson(null, {
	style: function(layer) {
		return {
			color: '#202020',
			weight: 4
		};
	}
}));

	
route.on('ready', function() {
        mapLeaflet.fitBounds(route.getBounds());
    })
route.addTo(mapLeaflet);
	
var markers = L.mapbox.featureLayer();

var markerTypes = {
	boring: {
		iconUrl: './assets/map/marker-grey.png',
		iconSize: [28, 45],
		iconAnchor: [14, 45],
		popupAnchor: [0, -45]
	},
};

var geojson = [
{
	type: 'Feature',
	geometry: {
  		type: 'Point',
  		coordinates: [-52.620334, 47.523855]
	},
	properties: {
  		icon: markerTypes.boring,
		content: ("<h3>hello!</h3>\
				  <p>this is some stuff and more and more and more</p>")
	}
},
{
	type: 'Feature',
	geometry: {
  		type: 'Point',
  		coordinates: [-52.714333, 47.556824]
	},
	properties: {
  		icon: markerTypes.boring,
		content: ("<h3><a href='http://astheravenfli.es/journal/2017/04/14/how-my-home-became-a-wasteland/' target='blank'>How My Home Became a Wasteland &rarr;</a></h3><p>About logging, fires, and the importance of learning local history.</p><img src='http://astheravenfli.es/journal/img/2017/04/04141701-2000-web.jpg' width='100%'>")
	}
},
];

markers.on('layeradd', function(e) {
  var marker = e.layer,
    feature = marker.feature;
  marker.setIcon(L.icon(feature.properties.icon));
  marker.bindPopup(feature.properties.content, {
	  maxWidth: 400
  })

});
markers.setGeoJSON(geojson);

var clustered = new L.MarkerClusterGroup({
	showCoverageOnHover: false
});
clustered.addLayer(markers);

clustered.addTo(mapLeaflet);

</script>

</body>
</html>